<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="çƒˆé…’äº‘" name="description">
    <title>çƒˆé…’äº‘</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&family=Poppins:wght@400;600&display=swap"
          rel="stylesheet">
    <style>
        /* å®šä¹‰å…¨å±€å˜é‡ (æ¶²æ€ç»ç’ƒé£æ ¼) */
        :root {
            /* äº®è‰²æ¨¡å¼èƒŒæ™¯è‰² */
            --bg-liquid-1: #c3e2f7;
            --bg-liquid-2: #e0f2f7;
            --bg-liquid-3: #f0e6fa;
            --liquid-glass-bg: rgba(255, 255, 255, 0.35);
            --liquid-glass-border: 1px solid rgba(255, 255, 255, 0.2);
            --text-main: #2d3436;
            --text-sub: #636e72;
            --card-shadow: 0 15px 50px rgba(31, 38, 135, 0.12);
            --btn-bg: linear-gradient(135deg, #7c99e4 0%, #a7c1ed 100%);
            --btn-hover-shadow: 0 10px 30px rgba(124, 153, 228, 0.35);
            --line-color: rgba(45, 52, 54, 0.08);
            --visualizer-color: #2d3436;
            --text-main-rgb-comp: 45, 52, 54;
        }

        /* æš—é»‘æ¨¡å¼å˜é‡ */
        body.dark-mode {
            --bg-liquid-1: #0f1c2b;
            --bg-liquid-2: #1a2a3a;
            --bg-liquid-3: #223545;
            --liquid-glass-bg: rgba(20, 20, 30, 0.55);
            --liquid-glass-border: 1px solid rgba(255, 255, 255, 0.05);
            --text-main: #e0e7eb;
            --text-sub: #b2bec3;
            --card-shadow: 0 15px 50px rgba(0, 0, 0, 0.45);
            --btn-bg: linear-gradient(135deg, #4b6cb7 0%, #182848 100%);
            --btn-hover-shadow: 0 10px 30px rgba(75, 108, 183, 0.35);
            --line-color: rgba(224, 231, 235, 0.08);
            --visualizer-color: #e0e7eb;
            --text-main-rgb-comp: 224, 231, 235;
        }

        /* åŸºç¡€æ ·å¼ */
        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', 'Noto Sans SC', sans-serif;
            margin: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: linear-gradient(-45deg, var(--bg-liquid-1), var(--bg-liquid-2), var(--bg-liquid-3), var(--bg-liquid-1));
            background-size: 400% 400%;
            animation: liquidGradientBG 30s ease infinite;
            color: var(--text-main);
            overflow: hidden;
            transition: color 0.8s ease;
            perspective: 1000px;
        }

        @keyframes liquidGradientBG {
            0%, 100% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
        }

        #interactive-lines {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
        }

        .liquid-particles {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: 0;
        }

        .liquid-particle {
            position: absolute;
            background: radial-gradient(circle at center, rgba(255, 255, 255, 0.12), transparent);
            border-radius: 50%;
            animation: floatAndFade 30s ease-in-out infinite;
            filter: blur(8px);
        }

        @keyframes floatAndFade {
            0% {
                transform: translateY(0) translateX(0) scale(1);
                opacity: 0;
            }
            20% {
                opacity: 0.6;
            }
            100% {
                transform: translateY(-110vh) translateX(30vw) scale(2);
                opacity: 0;
            }
        }

        .container {
            position: relative;
            z-index: 10;
            width: 90%;
            max-width: 500px;
            padding: 45px 35px;
            background: var(--liquid-glass-bg);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border: var(--liquid-glass-border);
            border-radius: 35px;
            box-shadow: var(--card-shadow);
            text-align: center;
            opacity: 0;
            transform: translateY(30px) scale(0.9);
            animation: liquidPopIn 1.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;
            transform-style: preserve-3d;
            transition: box-shadow 0.8s, background 0.8s;
            user-select: none;
        }

        @keyframes liquidPopIn {
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .avatar-wrapper {
            position: relative;
            display: inline-block;
            margin-bottom: 20px;
        }

        .avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 4px solid rgba(255, 255, 255, 0.25);
            object-fit: cover;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            transition: transform 0.8s cubic-bezier(0.25, 1, 0.5, 1), border-color 0.5s;
        }

        .avatar-wrapper:hover .avatar {
            transform: rotate(360deg) scale(1.1);
            border-color: rgba(255, 255, 255, 0.8);
        }

        .status-badge {
            position: absolute;
            bottom: 8px;
            right: 8px;
            background: #2ecc71;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            border: 4px solid rgba(255, 255, 255, 0.4);
            animation: pulse 3s infinite ease-in-out;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(46, 204, 113, 0.6);
            }
            70% {
                box-shadow: 0 0 0 15px rgba(46, 204, 113, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(46, 204, 113, 0);
            }
        }

        h1 {
            font-size: 2.2em;
            margin: 10px 0;
            letter-spacing: 1.5px;
            font-weight: 700;
            position: relative;
            display: inline-block;
        }

        h1:hover::before,
        h1:hover::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--liquid-glass-bg);
            opacity: 0.8;
        }

        h1:hover::before {
            left: 2px;
            text-shadow: -1px 0 #ff00c1;
            clip-path: polygon(0 0, 100% 0, 100% 45%, 0 45%);
            animation: glitch-anim 0.3s infinite linear alternate-reverse;
        }

        h1:hover::after {
            left: -2px;
            text-shadow: -1px 0 #00fff9;
            clip-path: polygon(0 55%, 100% 55%, 100% 100%, 0 100%);
            animation: glitch-anim2 0.3s infinite linear alternate-reverse;
        }

        @keyframes glitch-anim {
            0% { clip-path: polygon(0 10%, 100% 10%, 100% 20%, 0 20%); }
            20% { clip-path: polygon(0 30%, 100% 30%, 100% 40%, 0 40%); }
            40% { clip-path: polygon(0 50%, 100% 50%, 100% 60%, 0 60%); }
            60% { clip-path: polygon(0 70%, 100% 70%, 100% 80%, 0 80%); }
            80% { clip-path: polygon(0 90%, 100% 90%, 100% 100%, 0 100%); }
            100% { clip-path: polygon(0 0, 100% 0, 100% 10%, 0 10%); }
        }

        @keyframes glitch-anim2 {
            0% { clip-path: polygon(0 0, 100% 0, 100% 10%, 0 10%); }
            20% { clip-path: polygon(0 20%, 100% 20%, 100% 30%, 0 30%); }
            40% { clip-path: polygon(0 40%, 100% 40%, 100% 50%, 0 50%); }
            60% { clip-path: polygon(0 60%, 100% 60%, 100% 70%, 0 70%); }
            80% { clip-path: polygon(0 80%, 100% 80%, 100% 90%, 0 90%); }
            100% { clip-path: polygon(0 100%, 100% 100%, 100% 0, 0 0); }
        }

        .bio {
            color: var(--text-sub);
            font-size: 1.1em;
            margin-bottom: 35px;
            min-height: 1.5em;
            font-weight: 400;
            line-height: 1.6;
        }

        .link-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
            transform: translateZ(20px);
        }

        .link-item {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 18px;
            border-radius: 20px;
            text-decoration: none;
            color: white;
            font-weight: 600;
            font-size: 1.1em;
            letter-spacing: 0.8px;
            background: var(--btn-bg);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            transition: transform 0.6s cubic-bezier(0.2, 0.8, 0.2, 1), box-shadow 0.6s;
            opacity: 0;
            transform: translateY(30px);
            animation: slideUpLiquid 1s cubic-bezier(0.22, 1, 0.36, 1) forwards;
        }

        @keyframes slideUpLiquid {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .link-item:hover {
            transform: translateY(-6px) scale(1.02);
            box-shadow: var(--btn-hover-shadow);
        }

        .link-item::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: 1s ease;
        }

        .link-item:hover::after {
            left: 100%;
        }

        .footer {
            margin-top: 45px;
            font-size: 0.9em;
            color: var(--text-sub);
            opacity: 0.6;
            transition: opacity 0.5s;
            transform: translateZ(10px);
        }

        .footer:hover {
            opacity: 1;
        }

        .mouse-trail {
            position: fixed;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            opacity: 0;
            transform: translate(-50%, -50%) scale(0);
            animation: trailFadeInScale 0.6s forwards;
        }

        @keyframes trailFadeInScale {
            0% {
                opacity: 0.6;
                transform: translate(-50%, -50%) scale(0.5);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(1.5);
            }
        }

        /* æŒ‰é’®ç¾¤ç»„æ ·å¼ */
        .controls-group {
            position: absolute;
            top: 30px;
            right: 30px;
            display: flex;
            gap: 15px;
            z-index: 100;
        }

        .control-btn {
            width: 48px;
            height: 48px;
            background: var(--liquid-glass-bg);
            backdrop-filter: blur(20px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
            font-size: 1.3em;
            transition: all 0.5s cubic-bezier(0.25, 1, 0.5, 1);
            position: relative;
        }

        .control-btn:hover {
            transform: scale(1.15);
            background: rgba(255, 255, 255, 0.6);
        }

        /* æ‘„åƒå¤´å¼€å¯æ—¶çš„æŒ‡ç¤ºç¯ */
        .camera-active::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 12px;
            height: 12px;
            background: #e74c3c;
            border-radius: 50%;
            border: 2px solid #fff;
            animation: blink 1.5s infinite;
        }

        @keyframes blink {
            50% { opacity: 0.5; }
        }

        /* æ‘„åƒå¤´é¢„è§ˆçª—å£ï¼ˆé»˜è®¤éšè—ï¼‰ */
        #webcam-preview {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 160px;
            height: 120px;
            border-radius: 15px;
            overflow: hidden;
            z-index: 90;
            border: 2px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s, transform 0.5s;
            pointer-events: none;
            background: #000;
        }

        #webcam-preview.show {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
        }

        #webcam-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transform: scaleX(-1); /* é•œåƒç¿»è½¬ */
        }

        /* æ‰‹åŠ¿çŠ¶æ€æç¤º */
        #gesture-status {
            position: absolute;
            bottom: 5px;
            left: 0;
            width: 100%;
            text-align: center;
            color: white;
            font-size: 10px;
            background: rgba(0,0,0,0.5);
            padding: 2px 0;
        }

        /* æ–°å¢ï¼šæ‰‹åŠ¿å…‰æ ‡ */
        #gesture-cursor {
            position: fixed;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.9);
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            pointer-events: none; /* è®©ç‰©ç†é¼ æ ‡ç‚¹å‡»ç©¿é€ï¼Œä½†JSä¼šæ¨¡æ‹Ÿç‚¹å‡» */
            z-index: 10000;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.6);
            transition: width 0.15s, height 0.15s, background-color 0.15s, transform 0.1s;
            display: none;
        }

        #gesture-cursor.active {
            display: block;
        }

        #gesture-cursor.pinching {
            background-color: rgba(255, 255, 255, 0.8);
            width: 14px;
            height: 14px;
            border-color: #7c99e4;
        }

        #gesture-cursor.clicking {
            transform: translate(-50%, -50%) scale(1.5);
            background-color: #2ecc71;
            border-color: #2ecc71;
        }

        .falling-emoji {
            position: fixed;
            top: -60px;
            font-size: 26px;
            pointer-events: none;
            z-index: 1;
            opacity: 0.5;
            animation: fallLiquid linear forwards;
            filter: blur(0.5px);
        }

        @keyframes fallLiquid {
            to {
                transform: translateY(110vh) rotate(360deg);
            }
        }

        .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.4);
            transform: scale(0);
            animation: ripple-anim 0.8s linear;
            pointer-events: none;
            z-index: 9998;
        }

        @keyframes ripple-anim {
            to {
                transform: scale(6);
                opacity: 0;
            }
        }

        .music-control-group {
            position: fixed;
            bottom: 30px;
            left: 30px;
            display: flex;
            align-items: flex-end;
            gap: 10px;
            z-index: 100;
        }

        .music-player {
            width: 50px;
            height: 50px;
            background: var(--liquid-glass-bg);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
        }

        .music-player:hover {
            transform: scale(1.1);
        }

        .music-disc {
            font-size: 24px;
            animation: spin 4s linear infinite;
            animation-play-state: paused;
        }

        .music-player.playing .music-disc {
            animation-play-state: running;
        }

        .music-player.playing {
            border-color: #2ecc71;
            box-shadow: 0 0 15px rgba(46, 204, 113, 0.4);
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .music-visualizer {
            display: flex;
            gap: 4px;
            height: 25px;
            align-items: flex-end;
            margin-bottom: 10px;
            opacity: 0.6;
            transition: opacity 0.3s;
        }

        .music-visualizer.active {
            opacity: 1;
        }

        .bar {
            width: 4px;
            background: var(--visualizer-color);
            border-radius: 2px;
            height: 4px;
            transition: background-color 0.8s;
        }

        .music-visualizer.active .bar:nth-child(1) {
            animation: sound 0.8s infinite ease-in-out alternate;
        }

        .music-visualizer.active .bar:nth-child(2) {
            animation: sound 0.9s infinite ease-in-out alternate -0.4s;
        }

        .music-visualizer.active .bar:nth-child(3) {
            animation: sound 1.1s infinite ease-in-out alternate -0.2s;
        }

        .music-visualizer.active .bar:nth-child(4) {
            animation: sound 0.7s infinite ease-in-out alternate -0.6s;
        }

        @keyframes sound {
            0% { height: 4px; }
            100% { height: 24px; }
        }

        .beian-container {
            margin-top: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .beian-link {
            display: inline-flex;
            align-items: center;
            text-decoration: none;
            color: inherit;
            transition: color 0.3s, transform 0.3s;
        }

        .beian-link:hover {
            color: var(--text-main);
            transform: translateY(-2px);
        }

        .beian-icon {
            width: 16px;
            height: 16px;
            margin-right: 5px;
            vertical-align: middle;
        }

        @media (max-width: 768px) {
            body {
                overflow-y: auto;
                display: block;
                height: auto;
                padding: 40px 0;
            }

            .container {
                padding: 35px 25px;
                width: 90%;
                margin: 0 auto;
            }

            h1 {
                font-size: 2em;
            }

            .mouse-trail {
                display: none;
            }

            #webcam-preview {
                display: none;
            }
        }
    </style>
</head>
<body>

<canvas id="interactive-lines"></canvas>

<!-- æ‰‹åŠ¿å…‰æ ‡ -->
<div id="gesture-cursor"></div>

<div class="liquid-particles" id="liquid-particles-container"></div>

<div class="controls-group">
    <!-- æ‘„åƒå¤´æ§åˆ¶å¼€å…³ -->
    <div class="control-btn" id="camera-toggle" title="å¼€å¯æ‰‹åŠ¿æ§åˆ¶">ğŸ“·</div>
    <div class="control-btn" id="theme-toggle" title="åˆ‡æ¢ä¸»é¢˜">â˜€ï¸</div>
</div>

<div class="music-control-group">
    <div class="music-player" onclick="toggleMusic()" title="ç‚¹å‡»æ’­æ”¾/æš‚åœ">
        <div class="music-disc">ğŸµ</div>
        <audio id="bg-music" loop>
            <source src="https://cdn.pixabay.com/download/audio/2022/05/27/audio_1808fbf07a.mp3" type="audio/mpeg">
        </audio>
    </div>
    <div class="music-visualizer" id="visualizer">
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
    </div>
</div>

<!-- æ‘„åƒå¤´é¢„è§ˆåŒºåŸŸ -->
<div id="webcam-preview">
    <video id="webcam-video" playsinline></video>
    <div id="gesture-status">ç­‰å¾…å¼€å¯...</div>
</div>

<div class="container">
    <header>
        <div class="avatar-wrapper">
            <img alt="Avatar" class="avatar" id="avatar-img" src="avatar.png">
            <div class="status-badge"></div>
        </div>

        <h1 data-text="çƒˆé…’">çƒˆé…’</h1>

        <p class="bio" id="typing-text"></p>
    </header>

    <section class="link-section">
        <a class="link-item" href="https://github.com/lie-jiu" target="_blank"><span>ğŸ’» GitHub</span></a>
        <a class="link-item" href="https://oj.liejiu.top" target="_blank"><span>ğŸˆ åœ¨çº¿è¯„æµ‹</span></a>
        <a class="link-item" href="https://blog.liejiu.top" target="_blank"><span>ğŸ“ ä¸ªäººåšå®¢</span></a>
        <a class="link-item" href="mailto:liejiunb666@gmail.com" target="_blank"><span>ğŸ“§ å‘é€é‚®ä»¶</span></a>
    </section>

    <footer class="footer">
        <div>Â© 2025 Made with â¤ï¸ by LieJiu</div>

        <div class="beian-container">
            <a class="beian-link" href="https://beian.mps.gov.cn/#/query/webSearch?code=36110402000194" rel="noreferrer"
               target="_blank">
                <img alt="å…¬å®‰å¤‡æ¡ˆå›¾æ ‡" class="beian-icon" src="https://beian.mps.gov.cn/favicon.ico">
                èµ£å…¬ç½‘å®‰å¤‡36110402000194å·
            </a>
            <a class="beian-link" href="https://beian.miit.gov.cn/" target="_blank">
                èµ£ICPå¤‡2025076709å·-1
            </a>
        </div>
    </footer>
</div>

<!-- å¼•å…¥ MediaPipe åº“ -->
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script>

<script>
    // é…ç½®å‚æ•°
    const config = {
        githubUsername: "lie-jiu",
        typingText: "å­¤å²›æœªç›¸é€¢",
        typingSpeed: 150,
        liquidEmojis: ['ğŸ’§', 'âœ¨', 'ğŸ«§', 'ğŸ’', 'ğŸ³', 'ğŸª', 'â„ï¸', 'ğŸŒŠ'],
        numParticles: 12
    };

    // æ‰“å­—æœºæ•ˆæœ
    const typingElement = document.getElementById('typing-text');
    let charIndex = 0;

    function typeWriter() {
        if (charIndex < config.typingText.length) {
            typingElement.textContent += config.typingText.charAt(charIndex);
            charIndex++;
            setTimeout(typeWriter, config.typingSpeed);
        }
    }

    window.onload = () => setTimeout(typeWriter, 1200);

    // ä¸»é¢˜åˆ‡æ¢
    const toggleBtn = document.getElementById('theme-toggle');
    const body = document.body;

    if (localStorage.getItem('theme') === 'dark') {
        body.classList.add('dark-mode');
        toggleBtn.textContent = 'ğŸŒ™';
    }

    toggleBtn.addEventListener('click', () => {
        body.classList.toggle('dark-mode');
        const isDark = body.classList.contains('dark-mode');
        toggleBtn.textContent = isDark ? 'ğŸŒ™' : 'â˜€ï¸';
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
    });

    // é¼ æ ‡æ‹–å°¾
    let isDrawing = false;
    document.addEventListener('mousemove', (e) => {
        if (isDrawing) return;
        isDrawing = true;
        setTimeout(() => isDrawing = false, 60);

        const trail = document.createElement('div');
        trail.className = 'mouse-trail';
        trail.style.left = `${e.clientX}px`;
        trail.style.top = `${e.clientY}px`;

        const rgbComponents = getComputedStyle(document.body).getPropertyValue('--text-main-rgb-comp').trim();
        trail.style.background = `rgba(${rgbComponents}, 0.7)`;

        document.body.appendChild(trail);
        setTimeout(() => trail.remove(), 800);
    });

    // éšæœºé£˜è½çš„Emoji
    function createEmoji() {
        const emoji = document.createElement('div');
        emoji.className = 'falling-emoji';
        emoji.innerText = config.liquidEmojis[Math.floor(Math.random() * config.liquidEmojis.length)];
        emoji.style.left = Math.random() * 100 + 'vw';
        emoji.style.animationDuration = (Math.random() * 7 + 8) + 's';
        emoji.style.opacity = Math.random() * 0.3 + 0.1;
        document.body.appendChild(emoji);
        setTimeout(() => emoji.remove(), 15000);
    }

    setInterval(createEmoji, 500);

    // èƒŒæ™¯ç²’å­æ•ˆæœ
    const particlesContainer = document.getElementById('liquid-particles-container');

    function createParticle() {
        const particle = document.createElement('div');
        particle.className = 'liquid-particle';
        const size = Math.random() * 100 + 50;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        particle.style.left = `${Math.random() * 100}vw`;
        particle.style.top = `${Math.random() * 100 + 100}vh`;
        particle.style.animationDelay = `${Math.random() * 10}s`;
        particle.style.animationDuration = `${Math.random() * 20 + 25}s`;
        particlesContainer.appendChild(particle);
        setTimeout(() => particle.remove(), 50000);
    }

    for (let i = 0; i < config.numParticles; i++) {
        createParticle();
    }

    // 3D è§†å·®ä¸äº¤äº’é€»è¾‘
    const container = document.querySelector('.container');

    // åˆå§‹åŒ–çŠ¶æ€å˜é‡
    let currentRotateX = 0;
    let currentRotateY = 0;
    let currentTranslateX = 0;
    let currentTranslateY = 0;
    let currentScale = 1;
    let isGestureActive = false; // æ˜¯å¦å¼€å¯æ‰‹åŠ¿

    setTimeout(() => {
        container.style.opacity = '1';
        container.style.transform = 'translateY(0) scale(1)';
        container.style.animation = 'none';

        if (window.innerWidth > 768) {
            // é¼ æ ‡ç§»åŠ¨äº‹ä»¶ (å¦‚æœæ‰‹åŠ¿æœªå¼€å¯ï¼Œåˆ™ä½¿ç”¨é¼ æ ‡)
            document.addEventListener('mousemove', (e) => {
                if (isGestureActive) return; // å¦‚æœå¼€å¯äº†æ‘„åƒå¤´ï¼Œå¿½ç•¥é¼ æ ‡è§†å·®

                const sensitivity = 25;
                const xAxis = (window.innerWidth / 2 - e.pageX) / sensitivity;
                const yAxis = (window.innerHeight / 2 - e.pageY) / sensitivity;

                // æ›´æ–°å½“å‰çŠ¶æ€
                currentRotateY = -xAxis;
                currentRotateX = yAxis;

                updateContainerTransform();
            });

            document.addEventListener('mouseleave', () => {
                if (isGestureActive) return;
                currentRotateY = 0;
                currentRotateX = 0;
                updateContainerTransform();
            });

            document.addEventListener('mouseenter', () => {
                if (isGestureActive) return;
                container.style.transition = 'transform 0.1s ease-out';
            });
        }
    }, 1500);

    // ç»Ÿä¸€æ›´æ–° Transform å‡½æ•°
    function updateContainerTransform() {
        container.style.transform = `
            translate(${currentTranslateX}px, ${currentTranslateY}px)
            rotateY(${currentRotateY}deg)
            rotateX(${currentRotateX}deg)
            scale(${currentScale})
        `;
    }

    // ç‚¹å‡»å±å¹•ç”Ÿæˆæ³¢çº¹
    document.addEventListener('click', function (e) {
        if (e.target.closest('.music-player') || e.target.closest('a') || e.target.closest('.control-btn')) return;

        const ripple = document.createElement('div');
        ripple.classList.add('ripple');
        document.body.appendChild(ripple);

        const size = 120;
        ripple.style.width = size + 'px';
        ripple.style.height = size + 'px';
        ripple.style.left = e.clientX - size / 2 + 'px';
        ripple.style.top = e.clientY - size / 2 + 'px';

        setTimeout(() => ripple.remove(), 800);
    });

    // éŸ³ä¹æ’­æ”¾å™¨æ§åˆ¶
    function toggleMusic() {
        const audio = document.getElementById('bg-music');
        const player = document.querySelector('.music-player');
        const visualizer = document.getElementById('visualizer');

        if (audio.paused) {
            audio.play().catch(error => console.log("éŸ³ä¹æ’­æ”¾è¢«æµè§ˆå™¨é˜»æ­¢"));
            player.classList.add('playing');
            visualizer.classList.add('active');
        } else {
            audio.pause();
            player.classList.remove('playing');
            visualizer.classList.remove('active');
        }
    }

    // äº¤äº’å¼çº¿æ¡èƒŒæ™¯è„šæœ¬
    const canvas = document.getElementById('interactive-lines');
    const ctx = canvas.getContext('2d');
    let particlesArray;
    let mouse = {
        x: null,
        y: null,
        radius: 150
    }

    window.addEventListener('resize', () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        initParticles();
    });

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    window.addEventListener('mousemove', (event) => {
        mouse.x = event.x;
        mouse.y = event.y;
    });

    window.addEventListener('mouseout', () => {
        mouse.x = undefined;
        mouse.y = undefined;
    });

    class Particle {
        constructor(x, y, directionX, directionY, size, color) {
            this.x = x;
            this.y = y;
            this.directionX = directionX;
            this.directionY = directionY;
            this.size = size;
            this.color = color;
        }

        draw() {
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false);
            const isDark = document.body.classList.contains('dark-mode');
            ctx.fillStyle = isDark ? 'rgba(255, 255, 255, 0.15)' : 'rgba(45, 52, 54, 0.15)';
            ctx.fill();
        }

        update() {
            if (this.x > canvas.width || this.x < 0) {
                this.directionX = -this.directionX;
            }
            if (this.y > canvas.height || this.y < 0) {
                this.directionY = -this.directionY;
            }

            let dx = mouse.x - this.x;
            let dy = mouse.y - this.y;
            let distance = Math.sqrt(dx * dx + dy * dy);

            if (distance < mouse.radius + this.size) {
                if (mouse.x < this.x && this.x < canvas.width - this.size * 10) {
                    this.x += 5;
                }
                if (mouse.x > this.x && this.x > this.size * 10) {
                    this.x -= 5;
                }
                if (mouse.y < this.y && this.y < canvas.height - this.size * 10) {
                    this.y += 5;
                }
                if (mouse.y > this.y && this.y > this.size * 10) {
                    this.y -= 5;
                }
            }

            this.x += this.directionX;
            this.y += this.directionY;
            this.draw();
        }
    }

    function initParticles() {
        particlesArray = [];
        let numberOfParticles = (canvas.height * canvas.width) / 9000;
        for (let i = 0; i < numberOfParticles; i++) {
            let size = (Math.random() * 3) + 1;
            let x = (Math.random() * ((innerWidth - size * 2) - (size * 2)) + size * 2);
            let y = (Math.random() * ((innerHeight - size * 2) - (size * 2)) + size * 2);
            let directionX = (Math.random() * 1) - 0.5;
            let directionY = (Math.random() * 1) - 0.5;

            particlesArray.push(new Particle(x, y, directionX, directionY, size));
        }
    }

    function connect() {
        let opacityValue = 1;
        for (let a = 0; a < particlesArray.length; a++) {
            for (let b = a; b < particlesArray.length; b++) {
                let distance = ((particlesArray[a].x - particlesArray[b].x) * (particlesArray[a].x - particlesArray[b].x))
                    + ((particlesArray[a].y - particlesArray[b].y) * (particlesArray[a].y - particlesArray[b].y));

                if (distance < (canvas.width / 7) * (canvas.height / 7)) {
                    opacityValue = 1 - (distance / 20000);
                    const isDark = document.body.classList.contains('dark-mode');
                    ctx.strokeStyle = isDark
                        ? `rgba(224, 231, 235, ${opacityValue * 0.15})`
                        : `rgba(45, 52, 54, ${opacityValue * 0.15})`;
                    ctx.lineWidth = 1;
                    ctx.beginPath();
                    ctx.moveTo(particlesArray[a].x, particlesArray[a].y);
                    ctx.lineTo(particlesArray[b].x, particlesArray[b].y);
                    ctx.stroke();
                }
            }
        }
    }

    function animateParticles() {
        requestAnimationFrame(animateParticles);
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        for (let i = 0; i < particlesArray.length; i++) {
            particlesArray[i].update();
        }
        connect();
    }

    initParticles();
    animateParticles();

    // æŒ‰é’®å¸é™„æ•ˆæœ
    const buttons = document.querySelectorAll('.link-item');
    buttons.forEach(btn => {
        const span = btn.querySelector('span');
        btn.addEventListener('mousemove', (e) => {
            if (window.innerWidth <= 768) return;
            const rect = btn.getBoundingClientRect();
            const x = e.clientX - rect.left - rect.width / 2;
            const y = e.clientY - rect.top - rect.height / 2;
            btn.style.animation = 'none';
            btn.style.opacity = '1';
            const strength = 0.15;
            const moveX = x * strength;
            const moveY = y * strength - 6;
            btn.style.transition = 'transform 0.1s ease-out, box-shadow 0.3s';
            btn.style.transform = `translate(${moveX}px, ${moveY}px) scale(1.02)`;
            if (span) {
                span.style.transition = 'transform 0.1s ease-out';
                span.style.transform = `translate(${x * 0.08}px, ${y * 0.08}px)`;
            }
        });

        btn.addEventListener('mouseleave', (e) => {
            btn.style.transition = 'transform 0.6s cubic-bezier(0.2, 0.8, 0.2, 1), box-shadow 0.6s';
            btn.style.transform = '';
            if (span) {
                span.style.transition = 'transform 0.6s cubic-bezier(0.2, 0.8, 0.2, 1)';
                span.style.transform = '';
            }
        });
    });

    // -----------------------------------------------------------
    // å•æ‰‹æ‰‹åŠ¿æ§åˆ¶é€»è¾‘ (MediaPipe Hands)
    // -----------------------------------------------------------

    const videoElement = document.getElementById('webcam-video');
    const cameraToggleBtn = document.getElementById('camera-toggle');
    const webcamPreview = document.getElementById('webcam-preview');
    const gestureStatus = document.getElementById('gesture-status');
    const gestureCursor = document.getElementById('gesture-cursor');
    let camera = null;
    let hands = null;

    // çŠ¶æ€å˜é‡
    let isPinching = false;
    let pinchStartX = 0;
    let pinchStartY = 0;
    let cardStartX = 0;
    let cardStartY = 0;

    // ç¼©æ”¾åŸºå‡†
    let refHandSize = 0; // æåˆå¼€å§‹æ—¶æ‰‹çš„å¤§å°
    let refCardScale = 1; // æåˆå¼€å§‹æ—¶å¡ç‰‡çš„å¤§å°

    // ç‚¹å‡»æ£€æµ‹
    let lastPinchReleaseTime = 0;
    let pinchStartTime = 0;

    cameraToggleBtn.addEventListener('click', () => {
        if (!isGestureActive) {
            startCamera();
        } else {
            stopCamera();
        }
    });

    async function startCamera() {
        if (!hands) {
            gestureStatus.innerText = "åŠ è½½æ¨¡å‹ä¸­...";
            hands = new Hands({locateFile: (file) => {
                    return `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`;
                }});

            hands.setOptions({
                maxNumHands: 1, // å¼ºåˆ¶å•æ‰‹
                modelComplexity: 1,
                minDetectionConfidence: 0.5,
                minTrackingConfidence: 0.5
            });

            hands.onResults(onResults);
        }

        if (!camera) {
            camera = new Camera(videoElement, {
                onFrame: async () => {
                    await hands.send({image: videoElement});
                },
                width: 320,
                height: 240
            });
        }

        try {
            await camera.start();
            isGestureActive = true;
            cameraToggleBtn.classList.add('camera-active');
            webcamPreview.classList.add('show');
            gestureCursor.classList.add('active');
            gestureStatus.innerText = "æ‘„åƒå¤´å·²å¯åŠ¨";

            // åˆ‡æ¢ä¸ºå¿«é€Ÿå“åº”æ¨¡å¼
            container.style.transition = 'transform 0.05s linear, box-shadow 0.8s, background 0.8s';

        } catch (error) {
            console.error("Camera start failed:", error);
            alert("æ— æ³•è®¿é—®æ‘„åƒå¤´ï¼Œè¯·æ£€æŸ¥æƒé™ã€‚");
            gestureStatus.innerText = "å¯åŠ¨å¤±è´¥";
        }
    }

    function stopCamera() {
        if (camera) {
            camera.stop();
            camera = null;
        }
        isGestureActive = false;
        cameraToggleBtn.classList.remove('camera-active');
        webcamPreview.classList.remove('show');
        gestureCursor.classList.remove('active');

        // æ¢å¤åŸæœ‰çŠ¶æ€
        currentTranslateX = 0;
        currentTranslateY = 0;
        currentRotateX = 0;
        currentRotateY = 0;
        currentScale = 1;

        container.style.transition = 'transform 0.5s ease-out, box-shadow 0.8s, background 0.8s';
        updateContainerTransform();
    }

    // æ˜ å°„å‡½æ•°ï¼šå¢åŠ çµæ•åº¦ï¼Œä½¿å¾—æ‰‹ä¸éœ€è¦ç§»åŠ¨åˆ°è¾¹ç¼˜ä¹Ÿèƒ½è§¦å‘è¾¹ç¼˜ç‚¹å‡»
    function mapCursor(value) {
        // æ˜ å°„å‚æ•°ï¼šä¿ç•™è¾¹ç¼˜ 20% çš„â€œæ­»åŒºâ€ä¸è¦ç”¨æˆ·å»å¤Ÿ
        const minRange = 0.2;
        const maxRange = 0.8;

        // å½’ä¸€åŒ–åˆ° 0-1
        let normalized = (value - minRange) / (maxRange - minRange);

        // é™åˆ¶åœ¨å±å¹•å†…
        return Math.max(0, Math.min(1, normalized));
    }

    // åˆ¤æ–­æåˆ
    function isHandPinchingFunc(landmarks) {
        const indexTip = landmarks[8];
        const thumbTip = landmarks[4];
        const distance = Math.hypot(indexTip.x - thumbTip.x, indexTip.y - thumbTip.y);
        return distance < 0.05;
    }

    // è®¡ç®—æ‰‹æŒå¤§å°ï¼ˆä½œä¸ºè·ç¦»å‚è€ƒï¼‰
    function getHandSize(landmarks) {
        // ä½¿ç”¨æ‰‹è…•(0)åˆ°ä¸­æŒ‡æ ¹éƒ¨(9)çš„è·ç¦»æ¯”è¾ƒç¨³å®š
        const wrist = landmarks[0];
        const middleMCP = landmarks[9];
        return Math.hypot(wrist.x - middleMCP.x, wrist.y - middleMCP.y);
    }

    function onResults(results) {
        if (!isGestureActive) return;

        gestureCursor.style.display = 'none';

        if (results.multiHandLandmarks && results.multiHandLandmarks.length > 0) {
            const hand = results.multiHandLandmarks[0];
            const indexTip = hand[8];
            const palmCenter = hand[9];

            // 1. å…‰æ ‡ä½ç½®ä¼˜åŒ– (æ˜ å°„ + çµæ•åº¦)
            // åŸå§‹ x æ˜¯é•œåƒçš„ (1-x)
            const rawX = 1 - indexTip.x;
            const rawY = indexTip.y;

            const cursorX = mapCursor(rawX) * window.innerWidth;
            const cursorY = mapCursor(rawY) * window.innerHeight;

            gestureCursor.style.display = 'block';
            gestureCursor.style.transform = `translate(${cursorX}px, ${cursorY}px)`; // ä½¿ç”¨ transform æ€§èƒ½æ›´å¥½
            // æ›´æ–° DOM ä½ç½®ç”¨äºç‚¹å‡»æ£€æµ‹
            gestureCursor.dataset.x = cursorX;
            gestureCursor.dataset.y = cursorY;

            // 2. æ£€æµ‹æåˆ
            const isCurrentlyPinching = isHandPinchingFunc(hand);
            const currentHandSize = getHandSize(hand);

            // 3. æ‚¬åœæ¨¡å¼ (å¼ å¼€æ‰‹)
            if (!isCurrentlyPinching) {
                // å¦‚æœåˆšåˆšæ¾å¼€ï¼Œæ£€æµ‹åŒå‡»
                if (isPinching) {
                    const now = Date.now();
                    const pinchDuration = now - pinchStartTime;

                    if (pinchDuration < 400) { // æ˜¯ä¸€æ¬¡çŸ­ä¿ƒçš„æåˆ
                        if (now - lastPinchReleaseTime < 500) {
                            // --- åŒå‡»è§¦å‘é€»è¾‘ ---
                            gestureStatus.innerText = "âœ¨ åŒæç‚¹å‡»è§¦å‘ï¼";
                            gestureCursor.classList.add('clicking');
                            setTimeout(() => gestureCursor.classList.remove('clicking'), 300);

                            // éšè—å…‰æ ‡ä»¥è·å–ä¸‹æ–¹çš„å…ƒç´ 
                            gestureCursor.style.display = 'none';
                            const x = parseFloat(gestureCursor.dataset.x);
                            const y = parseFloat(gestureCursor.dataset.y);

                            let element = document.elementFromPoint(x, y);

                            // å…³é”®ä¿®å¤ï¼šå¦‚æœç‚¹åˆ°çš„æ˜¯ icon æˆ– spanï¼Œå‘ä¸ŠæŸ¥æ‰¾çˆ¶çº§é“¾æ¥
                            if (element) {
                                const link = element.closest('a') || element.closest('button') || element.closest('.control-btn');
                                if (link) {
                                    link.click();
                                    // è§†è§‰æ³¢çº¹
                                    const ripple = document.createElement('div');
                                    ripple.className = 'ripple';
                                    document.body.appendChild(ripple);
                                    ripple.style.left = (x - 60) + 'px';
                                    ripple.style.top = (y - 60) + 'px';
                                    setTimeout(() => ripple.remove(), 800);
                                } else {
                                    // æ™®é€šå…ƒç´ ç‚¹å‡»
                                    element.click();
                                }
                            }
                            lastPinchReleaseTime = 0;
                        } else {
                            lastPinchReleaseTime = now;
                        }
                    }
                }

                isPinching = false;
                gestureCursor.classList.remove('pinching');
                container.style.cursor = 'default';

                // è§†å·®é€»è¾‘
                const x = (0.5 - palmCenter.x) * 2;
                const y = (0.5 - palmCenter.y) * 2;
                currentRotateY = x * 15;
                currentRotateX = y * 15;

                gestureStatus.innerText = "ğŸ–ï¸ å¼ å¼€: æ‚¬åœ / åŒæç‚¹å‡»";

            } else {
                // 4. æåˆæ¨¡å¼ (æ‹–æ‹½ + ç¼©æ”¾)
                gestureCursor.classList.add('pinching');

                if (!isPinching) {
                    // åˆšå¼€å§‹æåˆï¼šè®°å½•åˆå§‹çŠ¶æ€
                    isPinching = true;
                    pinchStartTime = Date.now();

                    pinchStartX = cursorX;
                    pinchStartY = cursorY;
                    cardStartX = currentTranslateX;
                    cardStartY = currentTranslateY;

                    refHandSize = currentHandSize;
                    refCardScale = currentScale;
                }

                // æ‹–æ‹½è®¡ç®—
                const deltaX = cursorX - pinchStartX;
                const deltaY = cursorY - pinchStartY;
                currentTranslateX = cardStartX + deltaX;
                currentTranslateY = cardStartY + deltaY;

                // ç¼©æ”¾è®¡ç®— (æ¨æ‹‰é€»è¾‘)
                // ratio > 1 è¡¨ç¤ºæ‰‹å˜å¤§(é è¿‘æ‘„åƒå¤´) -> æˆ‘ä»¬æƒ³è¦ç¼©å°
                // ratio < 1 è¡¨ç¤ºæ‰‹å˜å°(è¿œç¦»æ‘„åƒå¤´) -> æˆ‘ä»¬æƒ³è¦æ”¾å¤§
                if (refHandSize > 0) {
                    const ratio = currentHandSize / refHandSize;
                    // ä½¿ç”¨åæ¯”æ¥å®ç°ï¼šé è¿‘=å˜å°
                    let newScale = refCardScale / ratio;

                    // é™åˆ¶ç¼©æ”¾èŒƒå›´
                    newScale = Math.max(0.4, Math.min(newScale, 1.8));
                    currentScale = newScale;
                }

                gestureStatus.innerText = "ğŸ¤ æåˆ: ç§»åŠ¨ + å‰æ¨ç¼©å°/åæ‹‰æ”¾å¤§";
                container.style.cursor = 'grabbing';
            }

        } else {
            gestureStatus.innerText = "æœªæ£€æµ‹åˆ°æ‰‹éƒ¨";
            isPinching = false;
        }

        updateContainerTransform();
    }
</script>
</body>
</html>